var l=200,p=function(){};p.prototype.append=function(e){return e.length?(e=p.from(e),!this.length&&e||e.length<l&&this.leafAppend(e)||this.length<l&&e.leafPrepend(this)||this.appendInner(e)):this};p.prototype.prepend=function(e){return e.length?p.from(e).append(this):this};p.prototype.appendInner=function(e){return new o(this,e)};p.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?p.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};p.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};p.prototype.forEach=function(e,r,t){r===void 0&&(r=0),t===void 0&&(t=this.length),r<=t?this.forEachInner(e,r,t,0):this.forEachInvertedInner(e,r,t,0)};p.prototype.map=function(e,r,t){r===void 0&&(r=0),t===void 0&&(t=this.length);var n=[];return this.forEach(function(i,s){return n.push(e(i,s))},r,t),n};p.from=function(e){return e instanceof p?e:e&&e.length?new u(e):p.empty};var u=function(f){function e(t){f.call(this),this.values=t}e.__proto__=f,e.prototype=Object.create(f.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(n,i){return n==0&&i==this.length?this:new e(this.values.slice(n,i))},e.prototype.getInner=function(n){return this.values[n]},e.prototype.forEachInner=function(n,i,s,h){for(var a=i;a<s;a++)if(n(this.values[a],h+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,s,h){for(var a=i-1;a>=s;a--)if(n(this.values[a],h+a)===!1)return!1},e.prototype.leafAppend=function(n){if(this.length+n.length<=l)return new e(this.values.concat(n.flatten()))},e.prototype.leafPrepend=function(n){if(this.length+n.length<=l)return new e(n.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(p);p.empty=new u([]);var o=function(f){function e(r,t){f.call(this),this.left=r,this.right=t,this.length=r.length+t.length,this.depth=Math.max(r.depth,t.depth)+1}return e.__proto__=f,e.prototype=Object.create(f.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,n,i,s){var h=this.left.length;if(n<h&&this.left.forEachInner(t,n,Math.min(i,h),s)===!1||i>h&&this.right.forEachInner(t,Math.max(n-h,0),Math.min(this.length,i)-h,s+h)===!1)return!1},e.prototype.forEachInvertedInner=function(t,n,i,s){var h=this.left.length;if(n>h&&this.right.forEachInvertedInner(t,n-h,Math.max(i,h)-h,s+h)===!1||i<h&&this.left.forEachInvertedInner(t,Math.min(n,h),i,s)===!1)return!1},e.prototype.sliceInner=function(t,n){if(t==0&&n==this.length)return this;var i=this.left.length;return n<=i?this.left.slice(t,n):t>=i?this.right.slice(t-i,n-i):this.left.slice(t,i).append(this.right.slice(0,n-i))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(p);export{p as R};
